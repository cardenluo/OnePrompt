# OnePrompt - 使用说明

## 1. 这是什么

OnePrompt 是一个“词卡（Prompt Card）”管理与应用工具：把常用提示词沉淀成词卡，在任何网页通过快捷键快速**插入**或**复制**，并支持组装、变量替换、预览图、站点黑白名单等能力。

## 2. 快捷键总览

- `Alt+Q`：打开/关闭“应用词卡”侧边弹窗（有输入焦点时默认插入，无焦点时复制；可被“网页名单”强制改为复制/插入）

- `Alt+S`：有选中文本时收藏为词卡；无选中文本时打开“组装词卡”弹窗（全页面组装器）

## 3. Popup 首页（扩展图标点开）

Popup 是总控制面板，常用入口如下：

- **管理词卡**：打开词卡管理页面（筛选/导入导出/批量操作/图片导入导出等）

- **新建词卡**：打开词卡编辑页（创建新词卡、绑定预览图、变量等）

- **数据迁移**：ZIP 备份/恢复（包含词卡、图片、网页名单、隐藏配置、智能采用设置等全部本地数据）

- **组装词卡**：打开组装器网页（管理组装用词卡库）

- **应用词卡**：对当前标签页触发 `Alt+Q`（直接打开侧边弹窗）

- **快捷键**：跳转 Chrome 快捷键设置页

- **网页名单**：打开“网页名单（插入/复制）”设置页

- **使用手册**：打开本页面

## 4. 网页名单（插入/复制）

用途：某些网站**强行插入**会导致输入组件内部状态异常（例如后续无法输入/无法发送）。这时需要把该网站加入名单，强制改为“复制”。也可反向强制某站点始终插入。

### 4.1 规则说明

- **强制复制（禁用插入）**：在该网页范围内，所有“插入”会退回为“复制”。

- **强制插入**：即使默认判定为复制，也会强制尝试插入。

- **匹配条件**：域名 + 路径前缀（可选）。路径前缀越长越优先。

- **包含子域名**：勾选后 `a.example.com`、`b.example.com` 也会命中 `example.com`。

### 4.2 推荐操作流程

1. 打开“网页名单”页面

2. 点**读取当前标签页**自动填入域名（可选包含路径前缀）

3. 选择策略：强制复制 / 强制插入

4. 点**添加**

5. 回到目标网页刷新页面后测试 `Alt+Q`/`Alt+S`

### 4.3 示例

- 豆包图片生成页：域名 `doubao.com` + 路径前缀 `/chat/create-image` → 选择“强制复制”

- 即梦：域名 `jimeng.jianying.com` → 选择“强制插入”

## 5. 应用词卡侧边弹窗（Alt+Q）

侧边弹窗标题会显示当前模式：`应用词卡【插入】` 或 `应用词卡【复制】`。

### 5.1 插入模式 vs 复制模式

- **插入模式**：点击词卡（非按钮区域）→ 直接插入到当前网页输入框。

- **复制模式**：点击词卡（非按钮区域）→ 复制到剪贴板。

### 5.2 顶部按钮详解（从左到右）

- `🖤/❤️`：只看收藏开关（❤️ 表示仅展示收藏）

- `🔓/🔒`：悬浮与拖动锁（悬浮后🔒锁定位置，🔓解锁允许拖动/缩放）

- `🔄`：刷新词卡库

- `💡`：切换主题（深色/浅色）

- `✕`：关闭侧边弹窗（关闭后再打开会回到默认侧边布局；悬浮位置/缩放为临时状态）

### 5.3 词卡按钮详解（每张词卡上）

- `🖤/❤️`：收藏/取消收藏

- `📌/📍`：置顶/取消置顶

- `✏️`：编辑（打开编辑对话框，可修改前缀/后缀/内容；支持变量替换）

### 5.4 悬浮拖动与缩放（按键步骤）

- 先点 `🔓` 进入悬浮 → 再点 `🔒/🔓` 解锁（处于可拖动状态）

- 在标题“应用词卡”上**长按**（约 **0.08s**）即可拖动窗口

- 弹窗底部会出现一条短横线（缩放条）

- 按住底部缩放条上下拖动即可缩小/放大窗口高度

- 松手后会自动锁回 `🔒`（防误触），需要再次调整就再点一次解锁

## 6. 组装词卡弹窗（Alt+S 无选中文本）

这是“多词卡组合为一个完整提示词”的弹窗，并提供一个组装编辑框。主按钮会根据当前网页是否支持插入自动显示为“插入”或“复制”。

### 6.1 常用按钮

- **权重**：为内容添加权重格式

- **矫正**：对常见标点/空格做文本矫正

- **中文/英文**：切换组装语言

- **清空**：清空组装框

- **撤回**：撤回历史

- **插入/复制**：主动作按钮（受网页名单影响）

- **退出**：关闭弹窗

### 6.2 组装词卡【词库】页面（“组装词卡”入口）

这是“组装词卡”的词库管理页：左侧是管理按钮，右侧是“组装文本框 + 分类词卡墙”。你在这里点击某个目录项，会把对应内容追加到上方组装文本框。

#### 6.2.1 左侧按钮（从上到下）

- **智能添加**：打开“智能添加设置”，配置后会影响“点击目录项追加到文本框”的格式，以及“权重”按钮的包装格式（见 6.2.4 举例）。

- **收藏词卡**：把当前组装文本框的内容一键带到“词卡编辑页”，自动用前 20 字生成临时标题，便于保存为一张新词卡。

- **时间排序**：把词库按创建时间排序（新建的更靠前）。

- **名称排序**：把词库按标题排序（字母/拼音顺序）。

- **隐藏管理**：按“类型”隐藏/显示，隐藏后的类型不会出现在词库列表里。

- **删除管理**：按类型/分类批量删除，或一键删除全部（不可恢复）。

- **导出CSV**：按类型/分类导出，或导出全部。

- **导入CSV**：批量导入词库；遇到重复会弹出选择：忽略 / 覆盖 / 追加。

- **查询重复**：扫描重复项并只显示重复列表；再次点击可“取消查重”恢复筛选状态。

- **智能去重**：一键删除重复项，只保留每组重复里的一个（会二次确认，不可恢复）。

- **批量修改**：批量重命名“类型/分类”（例如把“AI绘画”统一改为“SD”）。

#### 6.2.2 组装区按钮（文本框下方一排，从左到右）

- **所有类型（下拉）**：筛选当前词库墙，只看某一类型的目录项。

- **权重**：对组装文本框中“选中的文本”套一层权重格式（格式来自“智能添加设置”的“权重形式”）。

- **矫正**：把常见标点/空格做统一修正（例如中英文逗号/多余空格）。

- **中文/英文**：切换点击目录项时使用的字段：中文用 `content`，英文优先用 `content_en`（为空则回退到中文）。

- **清空**：清空组装文本框内容，并写入撤回历史。

- **撤回**：撤回最近一次编辑（最多保留 50 步）。

- **复制**：把组装文本框内容复制到剪贴板。

- **退出**：关闭该页面。

- **搜索框**：按标题/内容/类型关键字过滤词库墙。

#### 6.2.3 词库墙按钮（每个“分类卡片”右上角）

- `×`（删除目录项）：点击一次进入“单项删除”模式，会在每个目录项后面出现一个小 `×`，点它即可删除该条目录项。

- `🗑️`（删除整个词卡）：删除该分类下的所有目录项（相当于删除整个分类卡片）。

- `✏️`（编辑目录项）：进入编辑模式后，点击某个目录项会弹出编辑框，可改标题/类型/分类/中英文内容；再次点 `✏️` 退出编辑模式。

#### 6.2.4 智能添加（举例）

**智能添加**会影响两件事：① 你点击目录项追加到组装文本框时，内容之间怎么分隔、每条内容怎么包装；② 你选中文本点“权重”时，怎么套权重格式。

- **例 1：把每条词条做成列表**：分隔符号填 `\n`，内容形式填 `- text`。此后你连续点两条目录项，会变成：

    ```Plain Text
    
    - 第一条内容
    - 第二条内容
    ```

- **例 2：做“标签括号”包装**：分隔符号填 `,`，内容形式填 `[text]`。点目录项会追加为：`[a]` `,` `[b]`。

- **例 3：自定义权重格式**：权重形式填 `(text:1.2)`。在组装文本框里选中 `cinematic lighting` 后点“权重”，会替换为 `(cinematic lighting:1.2)`。

## 7. 管理词卡页面（管理词卡）

这是词卡库后台：搜索筛选、批量修改、去重、导入导出、图片管理等。

### 7.1 页面按钮详解（左侧栏，从上到下）

- **智能采用**：打开“智能采用设置”，配置“前缀标识/后缀标识”。这个设置会影响网页侧使用“智能采用”时最终拼接出来的提示词结构（见 7.4 举例）。

- **新建词卡**：打开“词卡编辑页”新建一张词卡。

- **时间排序**：按创建时间排序（新的更靠前）；置顶词卡永远排在最前。

- **名称排序**：按标题排序；置顶词卡永远排在最前。

- **隐藏管理**：按“类型”隐藏/显示；隐藏类型的词卡不会出现在列表里。

- **删除管理**：按类型/分类批量删除，或一键删除全部（不可恢复）。

- **导出CSV**：按类型/分类导出，或导出全部。

- **导入CSV**：批量导入词卡；遇到重复会弹出选择：忽略 / 覆盖 / 追加。

- **导出图片**：按类型/分类导出对应词卡的预览图，导出为 ZIP。

- **导入图片**：批量导入预览图并按“词卡ID/标题”匹配绑定（规则见 7.5）。

- **查询重复**：扫描重复项并只显示重复列表；再次点击可“取消查重”恢复筛选状态。

- **智能去重**：一键删除重复项，只保留每组重复里的一个（会二次确认，不可恢复）。

- **批量修改**：批量重命名“类型/分类”（例如把“AI绘画”统一改为“SD”）。

### 7.2 列表区与词卡卡片上的按钮

- **类型下拉（所有类型）**：选择后只看该类型；会自动清空已选分类标签。

- **搜索框**：按标题/内容/类型/标签关键字过滤。

- **分类标签**：支持多选；点击可追加/取消某个分类过滤。

- **词卡卡片点击（标题/内容区域）**：快速复制该词卡内容到剪贴板。

- `📌/📍`：置顶/取消置顶（置顶会优先显示，且不受“时间/名称排序”影响）。

- `✏️`：编辑该词卡（打开词卡编辑页）。

- `🗑️`：删除该词卡（不可恢复）。

### 7.3 CSV 导入/导出

导出字段：`标题,类型,分类,标签,内容,变量,ID`。其中“标签/变量”使用 `|` 分隔。

### 7.4 智能采用（举例）

智能采用的作用是：在“系统提示词”和“用户输入”之间自动插入你配置的标识行，让最终提示词更清晰、更稳定。

- **设置示例**：前缀标识填 `## The following is System prompt:`；后缀标识填 `## The following is user's input:`。

- **使用场景**：当你在网页侧编辑对话框里点击“智能采用”时，会按下面结构拼接：

    ```Plain Text
    
    （可选）前置提示词
    前缀标识
    系统提示词
    （可选）后缀标识
    （可选）后置提示词
    ```

- **拼接示例**：假设前置提示词是 `你是一个专业翻译。`，系统提示词是 `输出只保留译文。`，后置提示词是 `请翻译：{text}`，那么最终会变成：

    ```Plain Text
    
    你是一个专业翻译。
    ## The following is System prompt:
    输出只保留译文。
    ## The following is user's input:
    请翻译：{text}
    ```

- **注意**：如果你没有填写“后置提示词”，则不会插入“后缀标识”。

### 7.5 图片导入/导出（重要）

- **管理页批量导入图片**：仅支持 **PNG**，且尺寸必须是 **400×400**。

- 文件名建议使用 `词卡ID.png`；否则会尝试按标题匹配，标题重复会被忽略。

- 图片过多可能触发浏览器配额限制，出现“存储空间不足”。

## 8. 词卡编辑页面（新建/编辑词卡）

词卡编辑页由两块组成：右侧是当前词卡编辑表单；左侧是“词卡模板”面板（用来快速把常用片段追加到内容里）。

### 8.1 顶部按钮（右侧编辑区，从左到右）

- **取消**：关闭当前页面，不保存。

- **仅复制**：只把“内容”复制到剪贴板，并自动关闭页面（不保存为词卡）。

- **保存**：保存词卡到本地词库；如果标题+类型或内容与已有词卡重复，会提示存在重复，但仍允许保存。

### 8.2 词卡模板面板按钮（左侧，从上到下）

- **X**：进入/退出“快速删除模板”模式；进入后每个模板卡片会出现一个小 `×`，点它删除该模板。

- **新建**：打开“模板编辑”弹窗，创建一条模板（模板用于往词卡内容里追加常用片段）。

- **修改**：进入/退出“修改模板”模式；进入后点击某个模板卡片会打开编辑弹窗。

- **中文/英文**：切换模板追加时使用的字段：中文用 `content`，英文优先用 `content_en`（为空则回退到中文）。

- **导入CSV**：批量导入模板。

- **导出CSV**：按类型/分类导出模板，或导出全部。

- **隐藏管理**：按“类型”隐藏模板，隐藏后不在模板列表显示。

- **删除管理**：按类型/分类批量删除模板，或一键删除全部（不可恢复）。

- **智能去重**：一键删除重复模板，只保留每组重复里的一个（会二次确认，不可恢复）。

- **换行追加/尾部追加**：控制点击模板卡片时的追加方式：换行追加会在末尾加 `\n`；尾部追加会在末尾加 `,`。

- **所有类型（下拉）**：筛选模板列表，只看某一类型。

- **分类标签**：支持多选；点击可追加/取消某个分类过滤。

- **模板卡片点击**：正常模式下，点击模板会把模板内容追加到右侧“内容”文本框末尾（不改标题/类型/分类等其他字段）。

### 8.3 绑定预览图（左侧图片面板）

- 支持 **PNG/JPG**（任意尺寸）

- 会自动转换为 **400×400** 并绑定到该词卡

- 支持粘贴（先点击图片区域使其获得焦点，再 `Ctrl+V` 粘贴截图）

- **选择图片**：从本地选择图片并绑定到当前词卡

- **移除图片**：解绑当前词卡已绑定的图片

## 9. 数据迁移（ZIP）

- **下载ZIP**：备份全部本地数据（包含网页名单、词卡、图片、配置）

- **上传ZIP**：合并恢复数据；恢复后建议刷新/重新打开页面生效

## 10. 常见问题

- **插入后输入/发送失效**：把该网页加入“网页名单”，设置为“强制复制”。

- **提示已插入但实际没插入**：站点可能重渲染输入框，重新点击输入框后再插入，或刷新页面。

- **图片导入失败**：检查是否 PNG、是否 400×400、文件名是否能匹配词卡ID/标题。

---

OnePrompt - 积木管理词卡工具 © 2026
> （注：文档部分内容可能由 AI 生成）